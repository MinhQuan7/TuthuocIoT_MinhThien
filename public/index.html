<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard T·ªß Thu·ªëc AIoT</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <nav class="sidebar">
      <div>
        <div class="sidebar-header">
          <h2>T·ªß Thu·ªëc AIoT</h2>
        </div>
        <ul class="sidebar-nav">
          <li>
            <a href="#" class="nav-link active" data-page="page-dashboard"
              >T·ªïng quan</a
            >
          </li>
          <li>
            <a href="#" class="nav-link" data-page="page-schedule"
              >L·ªãch c√†i ƒë·∫∑t</a
            >
          </li>
          <li>
            <a href="#" class="nav-link" data-page="page-stats">Th·ªëng k√™</a>
          </li>
          <li>
            <a href="#" class="nav-link" data-page="page-medicines"
              >Qu·∫£n l√Ω thu·ªëc</a
            >
          </li>
          <li>
            <a href="#" class="nav-link" data-page="page-users"
              >Qu·∫£n l√Ω ng∆∞·ªùi d√πng</a
            >
          </li>
          <li>
            <a href="#">C√†i ƒë·∫∑t</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="main-content">
      <header>
        <h1 id="page-title">B·∫£ng ƒëi·ªÅu khi·ªÉn</h1>
        <div class="header-info">
          <span id="current-date-time"></span>
        </div>
      </header>

      <main class="page-content active" id="page-dashboard">
        <div class="dashboard-grid">
          <section class="card status-card">
            <div class="card-header">
              <span>üè† Tr·∫°ng th√°i T·ªß Thu·ªëc</span>
              <div class="card-header-badge">
                <span
                  class="status-indicator online"
                  id="header-status-indicator"
                ></span>
              </div>
            </div>
            <div class="status-grid">
              <div class="status-item">
                <div class="label">Tr·∫°ng th√°i</div>
                <div class="value online" id="device-status">--</div>
              </div>
              <div class="status-item">
                <div class="label">K·∫øt n·ªëi</div>
                <div class="value">Wi-Fi</div>
              </div>
              <div class="status-item">
                <div class="label">Nhi·ªát ƒë·ªô</div>
                <div class="value temp" id="device-temp">-- ¬∞C</div>
              </div>
              <div class="status-item">
                <div class="label">ƒê·ªô ·∫©m</div>
                <div class="value humid" id="device-humidity">-- %</div>
              </div>
            </div>
          </section>
          <section class="card alerts-card">
            <div class="card-header">
              <span>‚ö†Ô∏è C·∫£nh b√°o & T·ªìn kho</span>
              <div class="card-header-badge">
                <span class="alert-count" id="alert-count">0</span>
              </div>
            </div>
            <ul class="alert-list" id="alert-list">
              <li class="no-alerts">
                <span class="icon">‚úÖ</span>
                <div>Kh√¥ng c√≥ c·∫£nh b√°o n√†o!</div>
              </li>
            </ul>
          </section>
          <section class="card timeline-card">
            <div class="card-header">
              <span>üó∫ L·ªãch nh·∫Øc nh·ªü h√¥m nay</span>
              <div class="card-header-badge">
                <span class="timeline-count" id="timeline-count">0</span>
              </div>
            </div>
            <ul class="timeline" id="timeline-list">
              <li class="no-timeline">
                <span class="icon">üéÜ</span>
                <div>Kh√¥ng c√≥ ho·∫°t ƒë·ªông n√†o h√¥m nay!</div>
              </li>
            </ul>
          </section>
          <section class="card stats-card">
            <div class="card-header">
              <span>üìä Th·ªëng k√™ Tu√¢n th·ªß (7 ng√†y)</span>
              <div class="card-header-badge">
                <span class="stats-avg" id="stats-average">--</span>
              </div>
            </div>
            <div class="stats-user">
              <div class="stats-header">
                <span class="user-name">√îng (User 1)</span>
                <span class="percentage" id="stat-user-1">--%</span>
              </div>
              <div class="progress-bar">
                <div
                  class="progress-bar-inner"
                  id="stat-bar-1"
                  style="width: 0%"
                ></div>
              </div>
            </div>
            <div class="stats-user">
              <div class="stats-header">
                <span class="user-name">B√† (User 2)</span>
                <span class="percentage" id="stat-user-2">--%</span>
              </div>
              <div class="progress-bar">
                <div
                  class="progress-bar-inner low"
                  id="stat-bar-2"
                  style="width: 0%"
                ></div>
              </div>
            </div>
          </section>
        </div>
      </main>

      <main class="page-content" id="page-schedule">
        <div class="card add-schedule-card">
          <div class="card-header">
            <span>‚ûï Th√™m l·ªãch u·ªëng thu·ªëc m·ªõi</span>
            <div class="card-header-info">
              <span>T·∫°o l·ªãch nh·∫Øc nh·ªü t·ª± ƒë·ªông</span>
            </div>
          </div>
          <form id="add-schedule-form" class="schedule-form">
            <div class="form-group">
              <label for="user-select-dropdown">
                <span>üë§ Ch·ªçn ng∆∞·ªùi d√πng:</span>
              </label>
              <select id="user-select-dropdown" name="user"></select>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="weekdays-select">
                  <span>üìÖ Th·ª© trong tu·∫ßn:</span>
                </label>
                <div class="weekday-selector" id="weekdays-container">
                  <label class="weekday-item">
                    <input type="checkbox" name="weekdays" value="1" /> T2
                  </label>
                  <label class="weekday-item">
                    <input type="checkbox" name="weekdays" value="2" /> T3
                  </label>
                  <label class="weekday-item">
                    <input type="checkbox" name="weekdays" value="3" /> T4
                  </label>
                  <label class="weekday-item">
                    <input type="checkbox" name="weekdays" value="4" /> T5
                  </label>
                  <label class="weekday-item">
                    <input type="checkbox" name="weekdays" value="5" /> T6
                  </label>
                  <label class="weekday-item">
                    <input type="checkbox" name="weekdays" value="6" /> T7
                  </label>
                  <label class="weekday-item">
                    <input type="checkbox" name="weekdays" value="0" /> CN
                  </label>
                </div>
              </div>

              <div class="form-group">
                <label for="usage-duration">
                  <span>‚è≥ Th·ªùi gian s·ª≠ d·ª•ng:</span>
                </label>
                <div class="duration-input-group">
                  <input
                    type="number"
                    id="usage-duration"
                    name="usageDuration"
                    min="1"
                    max="365"
                    placeholder="30"
                    required
                  />
                  <span class="duration-unit">ng√†y</span>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="period-select">
                <span>‚è∞ Bu·ªïi u·ªëng:</span>
              </label>
              <select id="period-select" name="period" required>
                <option value="S√°ng">S√°ng (kho·∫£ng 8:00)</option>
                <option value="Tr∆∞a">Tr∆∞a (kho·∫£ng 12:00)</option>
                <option value="Chi·ªÅu">Chi·ªÅu (kho·∫£ng 17:00)</option>
                <option value="T·ªëi">T·ªëi (kho·∫£ng 20:00)</option>
              </select>
            </div>

            <div class="form-group">
              <label for="medicine-category-select">
                <span>üíä Danh m·ª•c thu·ªëc:</span>
              </label>
              <select
                id="medicine-category-select"
                name="medicineCategory"
                required
              >
                <option value="">Ch·ªçn lo·∫°i thu·ªëc...</option>
                <option value="pain-relief">Thu·ªëc gi·∫£m ƒëau</option>
                <option value="cold-flu">Thu·ªëc c·∫£m c√∫m</option>
                <option value="digestive">Thu·ªëc ti√™u h√≥a</option>
                <option value="heart">Thu·ªëc tim m·∫°ch</option>
                <option value="diabetes">Thu·ªëc ti·ªÉu ƒë∆∞·ªùng</option>
                <option value="blood-pressure">Thu·ªëc huy·∫øt √°p</option>
                <option value="vitamins">Vitamin & th·ª±c ph·∫©m ch·ª©c nƒÉng</option>
                <option value="antibiotics">Thu·ªëc kh√°ng sinh</option>
                <option value="other">Thu·ªëc kh√°c</option>
              </select>
            </div>

            <div class="form-group">
              <label for="medicine-name-input">
                <span>üè∑ T√™n thu·ªëc c·ª• th·ªÉ:</span>
              </label>
              <input
                type="text"
                id="medicine-name-input"
                name="medicineName"
                placeholder="V√≠ d·ª•: Paracetamol 500mg"
                required
              />
            </div>

            <div class="form-group">
              <label>
                <span>üè∑ Thu·ªëc ƒë√£ ch·ªçn:</span>
              </label>
              <div
                class="selected-medicines"
                id="selected-medicines-container"
              ></div>
            </div>

            <button type="submit" class="btn-submit">
              <span>‚úì L∆∞u l·ªãch u·ªëng thu·ªëc</span>
            </button>
          </form>
        </div>
        <div class="card">
          <div class="card-header">L·ªãch ƒë√£ c√†i ƒë·∫∑t (S·∫Øp t·ªõi)</div>
          <ul class="schedule-list" id="schedule-list"></ul>
        </div>
      </main>

      <main class="page-content" id="page-stats">
        <div class="card chart-card">
          <div class="card-header">
            <span>üìà Bi·ªÉu ƒë·ªì tu√¢n th·ªß 7 ng√†y qua</span>
            <div class="card-header-info">
              <span>So s√°nh hi·ªáu qu·∫£ tu√¢n th·ªß c·ªßa c√°c th√†nh vi√™n</span>
            </div>
          </div>
          <div class="chart-container">
            <canvas id="complianceChart"></canvas>
          </div>
        </div>
      </main>

      <main class="page-content" id="page-medicines">
        <!-- Medicine Inventory Dashboard -->
        <div class="medicine-inventory-card">
          <div class="card-header">
            <span>üìä T·ªïng quan t·ªìn kho thu·ªëc</span>
            <div class="card-header-info">
              <span>Theo d√µi s·ªë l∆∞·ª£ng v√† t√¨nh tr·∫°ng thu·ªëc</span>
            </div>
          </div>
          <div class="inventory-grid" id="inventory-grid">
            <!-- Inventory items will be rendered here -->
          </div>
        </div>

        <div class="card add-medicine-card">
          <div class="card-header">
            <span>üíä Th√™m thu·ªëc m·ªõi</span>
            <div class="card-header-info">
              <span>Qu·∫£n l√Ω kho thu·ªëc trong t·ªß</span>
            </div>
          </div>
          <form id="add-medicine-form" class="schedule-form">
            <div class="form-row">
              <div class="form-group">
                <label for="medicine-name-input">
                  <span>üíä T√™n thu·ªëc:</span>
                </label>
                <input
                  type="text"
                  id="medicine-name-input"
                  name="medicineName"
                  placeholder="V√≠ d·ª•: Paracetamol, Vitamin C..."
                  required
                />
              </div>
              <div class="form-group">
                <label for="medicine-dosage-input">
                  <span>‚öñÔ∏è Li·ªÅu l∆∞·ª£ng:</span>
                </label>
                <input
                  type="text"
                  id="medicine-dosage-input"
                  name="dosage"
                  placeholder="V√≠ d·ª•: 500mg, 1 vi√™n..."
                  required
                />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="medicine-quantity-input">
                  <span>üì¶ S·ªë l∆∞·ª£ng:</span>
                </label>
                <input
                  type="number"
                  id="medicine-quantity-input"
                  name="quantity"
                  placeholder="S·ªë vi√™n/li·ªÅu"
                  min="0"
                />
              </div>
              <div class="form-group">
                <label for="medicine-threshold-input">
                  <span>‚ö†Ô∏è Ng∆∞·ª°ng c·∫£nh b√°o:</span>
                </label>
                <input
                  type="number"
                  id="medicine-threshold-input"
                  name="minThreshold"
                  placeholder="C·∫£nh b√°o khi c√≤n X vi√™n"
                  min="1"
                  value="5"
                />
              </div>
            </div>
            <div class="form-group">
              <label for="medicine-expiry-input">
                <span>üìÖ Ng√†y h·∫øt h·∫°n:</span>
              </label>
              <input type="date" id="medicine-expiry-input" name="expiryDate" />
            </div>
            <div class="form-group">
              <label for="medicine-instructions-input">
                <span>üìù H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:</span>
              </label>
              <textarea
                id="medicine-instructions-input"
                name="instructions"
                placeholder="V√≠ d·ª•: U·ªëng sau ƒÉn, tr√°nh ti·∫øp x√∫c √°nh n·∫Øng..."
                rows="3"
              ></textarea>
            </div>
            <button type="submit" class="btn-submit">
              <span>‚úì L∆∞u thu·ªëc</span>
            </button>
          </form>
        </div>
        <div class="card medicine-list-card">
          <div class="card-header">
            <span>üíä Danh s√°ch thu·ªëc trong t·ªß</span>
            <div class="card-header-badge">
              <span class="medicine-count" id="medicine-count">0</span>
            </div>
          </div>
          <ul class="medicine-list" id="medicine-list"></ul>
        </div>
      </main>

      <main class="page-content" id="page-users">
        <div class="card add-user-card">
          <div class="card-header">
            <span>üë• Th√™m ng∆∞·ªùi d√πng m·ªõi</span>
            <div class="card-header-info">
              <span>Qu·∫£n l√Ω th√†nh vi√™n gia ƒë√¨nh</span>
            </div>
          </div>
          <form id="add-user-form" class="schedule-form">
            <div class="form-group">
              <label for="user-name-input">
                <span>üìù T√™n ng∆∞·ªùi d√πng:</span>
              </label>
              <input
                type="text"
                id="user-name-input"
                name="userName"
                placeholder="V√≠ d·ª•: Con Trai, Ch·ªã G√°i..."
                required
              />
            </div>
            <div class="form-group">
              <label for="user-avatar-file">
                <span>üì∑ Upload ·∫£nh ƒë·∫°i di·ªán:</span>
              </label>
              <div class="avatar-upload-container">
                <input
                  type="file"
                  id="user-avatar-file"
                  name="avatarFile"
                  accept="image/*"
                  class="file-input"
                />
                <label for="user-avatar-file" class="file-upload-btn">
                  <span>üìÅ Ch·ªçn ·∫£nh</span>
                </label>
                <div class="avatar-preview hidden" id="avatar-preview">
                  <img id="preview-image" src="" alt="Preview" />
                  <button
                    type="button"
                    class="remove-avatar"
                    id="remove-avatar"
                  >
                    ‚úï
                  </button>
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="user-avatar-input">
                <span>üåê Ho·∫∑c nh·∫≠p link ·∫£nh:</span>
              </label>
              <input
                type="text"
                id="user-avatar-input"
                name="avatarUrl"
                placeholder="https://i.pravatar.cc/150?img=... (t√πy ch·ªçn)"
              />
            </div>
            <button type="submit" class="btn-submit">
              <span>‚úì L∆∞u ng∆∞·ªùi d√πng</span>
            </button>
          </form>
        </div>
        <div class="card user-list-card">
          <div class="card-header">
            <span>üë• Danh s√°ch ng∆∞·ªùi d√πng hi·ªán t·∫°i</span>
            <div class="card-header-badge">
              <span class="user-count" id="user-count">0</span>
            </div>
          </div>
          <ul class="user-list" id="user-list"></ul>
        </div>
      </main>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
  </body>
</html>
